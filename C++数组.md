---
title: C++数组 指针
tags: C语言
categories:  C语言学习
---
# 数组
数组是具有一定顺序关系的若干相同类型变量的集合体，组成数组的变量称为该数组的元素。
数组属于构造类型。
可以由除void 型以外的任何一种类型构成。
## 一维数组
必须先声明，后使用
只能逐个引用数组元素，而不能一次引用整个数组
储存顺序：
数组元素在内存中顺序存放，他们的地址是连续的。从[0]开始。
数组名字是数组首元素的内存地址。
数组名是一个常量，不能被赋值。
初始化：
可以在编译阶段使数组得到初值。
在声明数组时对数组元素赋以初值。可以只给一部分元素赋初值。在对全部数组元素赋初值时，可以不指定数组长度。
## 一维数组应用
从键盘读入若干组选择题答案，计算并输出每组答案的正确率，直到输入ctrl+z为止。
每组连续输入5个答案，每个答案可以是'a'..'d'。
void main(void)
{
	char key[] = {'a','c','b','a','d'};
	char c;
	int ques = 0,numques = 5,numcorrect = 0;
	cout<<"enter the"<<numques<<"question tests:"<<endl;
	while(cin.get(c))
	{
		if(c!='\n')
			if(c==key[ques])
			{
				numcorrect++;
				cout<<" ";
			}
			else{cout<<"*";}
		else
		{
			cout<<" Score"<<float(numcorrect)/numques*100<<"%";
			ques = 0;
			numcorrect = 0;
			cout<<endl;
			continue;
		}
		ques++;
	}
}

## 二维数组
按行储存
二维数组的初始化
分行给数值赋初值
将所有数值写在一个{}内，按顺序赋值
可以对部分元素赋初值

## 高维数组
可以将高维数组看成由数组构成的数组

## 数组作为函数参数
数组元素作实参，与单个变量一样。
数组名作参数，形、实参数都应是数组名，类型要一样，传送的是数组首地址。对形参数组的改变会直接影响到实参数组。

使用数组名作为函数参数
主函数中初始化一个矩阵并将每个元素都输出，然后调用子函数，分别计算每一行的元素之和，将和直接存放在每行的第一个元素中，返回主函数之后输出各行元素的和。
void main(void)
{
	int Tabel[3][4] = {{1,2,3,4},{2,3,4,5},{3,4,5,6}};
	for(int i = 0; i<3; i++)
	{
		for(int j = 0; j<4; j++)
			cout<<Tabel[i][j]<<"  ";
		cout<<endl;
	}
	RowSum(Table,3);
}
void RowSum(int A[][4],int nrow) 
{
	int sum;
	for (int i = 0; i<nrow; i++)
	{
		sum = 0;
		for(int j = 0; j<4; j++)
			sum += A[i][j];
		cout<<"Sum of row"<<i<<" is "<<sum<<endl;
	}
}

## 对象数组
声明：
类名    数组名[元素个数]；
访问方法：
通过下标访问 数组名[下标].成员名
对象数组初始化：
数组中每一个元素对象被创建时，系统都会调用类构造函数初始化该对象。
通过初始化列表赋值。
例：Point A[2]={Point(1,2),Point(3,4)};
如果没有为数组元素指定显式初始值，数组元素便使用缺省值初始化（调用缺省构造函数）。
数组元素所属类的构造函数：
不声明构造函数，则采用缺省构造函数。
各元素对象的初值要求为相同的值时，可以声明具有缺省形参值的构造函数。
各元素对象的初值要求为不同的值时，需要声明带形参（无缺省值）的构造函数。
当数组中每一个对象被删除时，系统都要调用一次析构函数。

# 指针
内存空间的访问方式：
通过变量名访问
通过地址访问

地址运算符：&
例：
int var;
则&var  表示变量var在内存中的起始地址

## 指针变量的概念
指针：另一个变量的地址，用于间接访问变量
指针变量：用于存放地址的变量
指针变量的初始化：
储存类型  数据类型 *指针名=初始地址；
如：int *pa = &a;
注意：
1.用变量地址作为初值时，该变量必须在指针初始化之前已说明过，且变量类型应与指针类型一致。
2.可以用一个已赋初值的指针去初始化另一个指针变量。
3.不要用一个内部 auto 型变量去初始化 static 型指针。

指针变量的赋值运算
指针名=地址
1.“地址”中存放的数据类型与指针类型必须相符。
2.向指针变量赋的值必须是地址常量或变量，不能是普通整数。但可以赋值为整数0，表示空指针。
3.指针的类型是它所指向变量的类型，而不是指针本身数据值的类型，任何一个指针本身的数据值都是unsigned long int型。
4.允许声明指向 void 类型的指针。该指针可以被赋予任何类型对象的地址。
例： void *general; 

### 指针的声明、赋值和使用
void main()
{
	int *i_pointer;  //声明int型指针i_pointer
	int i;          //声明int型数i
	i_pointer=&i；  //取i的地址赋给i_pointer
	i = 10;   
	cout<<i<<endl;
	cout<<*i_pointer<<endl;
}

### void类型指针的使用
void *pv;
int *pint;int i;
void main()
{
	pv = &i;
	//void指针赋值给int指针需要类型强制转换
	pint = (int*)pv;
}

### 指针变量的算术运算
指针与整数的加减运算
1.指针 p 加上或减去 n ，其意义是指针当前指向位置的前方或后方第 n 个数据的地址。
2这种运算的结果值取决于指针指向的数据类型。
指针加一，减一运算
1.指向下一个或前一个数据。
2.例如：y=*px++ 相当于 y=*(px++) (*和++优先级相同，自右向左运算)

### 指针变量的关系运算
关系运算
1.指向相同类型数据的指针之间可以进行各种关系运算。
2.指向不同数据类型的指针，以及指针与一般整数变量之间的关系运算是无意义的。
3.指针可以和零之间进行等于或不等于的关系运算。例如：p==0或p!=0
赋值运算
1.向指针变量赋的值必须是地址常量或变量，不能是普通整数。但可以赋值为整数0，表示空指针。

## 指向数组元素的指针
声明与赋值
例：int a[10],  *pa;
    pa=&a[0]; 或 pa=a;
通过指针引用数组元素
经过上述声明及赋值后：
*pa就是a[0]，*(pa+1)就是a[1]，... ，*(pa+i)就是a[i].
a[i], *(pa+i), *(a+i), pa[i]都是等效的。
不能写 a++，因为a是数组首地址是常量。 
